{"ast":null,"code":"define(['./base', '../utils', 'jquery'], function (BaseAdapter, Utils, $) {\n  function SelectAdapter($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    SelectAdapter.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(SelectAdapter, BaseAdapter);\n\n  SelectAdapter.prototype.current = function (callback) {\n    var data = [];\n    var self = this;\n    this.$element.find(':selected').each(function () {\n      var $option = $(this);\n      var option = self.item($option);\n      data.push(option);\n    });\n    callback(data);\n  };\n\n  SelectAdapter.prototype.select = function (data) {\n    var self = this;\n    data.selected = true; // If data.element is a DOM node, use it instead\n\n    if ($(data.element).is('option')) {\n      data.element.selected = true;\n      this.$element.trigger('input').trigger('change');\n      return;\n    }\n\n    if (this.$element.prop('multiple')) {\n      this.current(function (currentData) {\n        var val = [];\n        data = [data];\n        data.push.apply(data, currentData);\n\n        for (var d = 0; d < data.length; d++) {\n          var id = data[d].id;\n\n          if ($.inArray(id, val) === -1) {\n            val.push(id);\n          }\n        }\n\n        self.$element.val(val);\n        self.$element.trigger('input').trigger('change');\n      });\n    } else {\n      var val = data.id;\n      this.$element.val(val);\n      this.$element.trigger('input').trigger('change');\n    }\n  };\n\n  SelectAdapter.prototype.unselect = function (data) {\n    var self = this;\n\n    if (!this.$element.prop('multiple')) {\n      return;\n    }\n\n    data.selected = false;\n\n    if ($(data.element).is('option')) {\n      data.element.selected = false;\n      this.$element.trigger('input').trigger('change');\n      return;\n    }\n\n    this.current(function (currentData) {\n      var val = [];\n\n      for (var d = 0; d < currentData.length; d++) {\n        var id = currentData[d].id;\n\n        if (id !== data.id && $.inArray(id, val) === -1) {\n          val.push(id);\n        }\n      }\n\n      self.$element.val(val);\n      self.$element.trigger('input').trigger('change');\n    });\n  };\n\n  SelectAdapter.prototype.bind = function (container, $container) {\n    var self = this;\n    this.container = container;\n    container.on('select', function (params) {\n      self.select(params.data);\n    });\n    container.on('unselect', function (params) {\n      self.unselect(params.data);\n    });\n  };\n\n  SelectAdapter.prototype.destroy = function () {\n    // Remove anything added to child elements\n    this.$element.find('*').each(function () {\n      // Remove any custom data set by Select2\n      Utils.RemoveData(this);\n    });\n  };\n\n  SelectAdapter.prototype.query = function (params, callback) {\n    var data = [];\n    var self = this;\n    var $options = this.$element.children();\n    $options.each(function () {\n      var $option = $(this);\n\n      if (!$option.is('option') && !$option.is('optgroup')) {\n        return;\n      }\n\n      var option = self.item($option);\n      var matches = self.matches(params, option);\n\n      if (matches !== null) {\n        data.push(matches);\n      }\n    });\n    callback({\n      results: data\n    });\n  };\n\n  SelectAdapter.prototype.addOptions = function ($options) {\n    Utils.appendMany(this.$element, $options);\n  };\n\n  SelectAdapter.prototype.option = function (data) {\n    var option;\n\n    if (data.children) {\n      option = document.createElement('optgroup');\n      option.label = data.text;\n    } else {\n      option = document.createElement('option');\n\n      if (option.textContent !== undefined) {\n        option.textContent = data.text;\n      } else {\n        option.innerText = data.text;\n      }\n    }\n\n    if (data.id !== undefined) {\n      option.value = data.id;\n    }\n\n    if (data.disabled) {\n      option.disabled = true;\n    }\n\n    if (data.selected) {\n      option.selected = true;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    var $option = $(option);\n\n    var normalizedData = this._normalizeItem(data);\n\n    normalizedData.element = option; // Override the option's data with the combined data\n\n    Utils.StoreData(option, 'data', normalizedData);\n    return $option;\n  };\n\n  SelectAdapter.prototype.item = function ($option) {\n    var data = {};\n    data = Utils.GetData($option[0], 'data');\n\n    if (data != null) {\n      return data;\n    }\n\n    if ($option.is('option')) {\n      data = {\n        id: $option.val(),\n        text: $option.text(),\n        disabled: $option.prop('disabled'),\n        selected: $option.prop('selected'),\n        title: $option.prop('title')\n      };\n    } else if ($option.is('optgroup')) {\n      data = {\n        text: $option.prop('label'),\n        children: [],\n        title: $option.prop('title')\n      };\n      var $children = $option.children('option');\n      var children = [];\n\n      for (var c = 0; c < $children.length; c++) {\n        var $child = $($children[c]);\n        var child = this.item($child);\n        children.push(child);\n      }\n\n      data.children = children;\n    }\n\n    data = this._normalizeItem(data);\n    data.element = $option[0];\n    Utils.StoreData($option[0], 'data', data);\n    return data;\n  };\n\n  SelectAdapter.prototype._normalizeItem = function (item) {\n    if (item !== Object(item)) {\n      item = {\n        id: item,\n        text: item\n      };\n    }\n\n    item = $.extend({}, {\n      text: ''\n    }, item);\n    var defaults = {\n      selected: false,\n      disabled: false\n    };\n\n    if (item.id != null) {\n      item.id = item.id.toString();\n    }\n\n    if (item.text != null) {\n      item.text = item.text.toString();\n    }\n\n    if (item._resultId == null && item.id && this.container != null) {\n      item._resultId = this.generateResultId(this.container, item);\n    }\n\n    return $.extend({}, defaults, item);\n  };\n\n  SelectAdapter.prototype.matches = function (params, data) {\n    var matcher = this.options.get('matcher');\n    return matcher(params, data);\n  };\n\n  return SelectAdapter;\n});","map":{"version":3,"sources":["/Users/albab/bookapro/amazon/src/assets/vendor/select2/src/js/select2/data/select.js"],"names":["define","BaseAdapter","Utils","$","SelectAdapter","$element","options","__super__","constructor","call","Extend","prototype","current","callback","data","self","find","each","$option","option","item","push","select","selected","element","is","trigger","prop","currentData","val","apply","d","length","id","inArray","unselect","bind","container","$container","on","params","destroy","RemoveData","query","$options","children","matches","results","addOptions","appendMany","document","createElement","label","text","textContent","undefined","innerText","value","disabled","title","normalizedData","_normalizeItem","StoreData","GetData","$children","c","$child","child","Object","extend","defaults","toString","_resultId","generateResultId","matcher","get"],"mappings":"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","sourcesContent":["define([\n  './base',\n  '../utils',\n  'jquery'\n], function (BaseAdapter, Utils, $) {\n  function SelectAdapter ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    SelectAdapter.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(SelectAdapter, BaseAdapter);\n\n  SelectAdapter.prototype.current = function (callback) {\n    var data = [];\n    var self = this;\n\n    this.$element.find(':selected').each(function () {\n      var $option = $(this);\n\n      var option = self.item($option);\n\n      data.push(option);\n    });\n\n    callback(data);\n  };\n\n  SelectAdapter.prototype.select = function (data) {\n    var self = this;\n\n    data.selected = true;\n\n    // If data.element is a DOM node, use it instead\n    if ($(data.element).is('option')) {\n      data.element.selected = true;\n\n      this.$element.trigger('input').trigger('change');\n\n      return;\n    }\n\n    if (this.$element.prop('multiple')) {\n      this.current(function (currentData) {\n        var val = [];\n\n        data = [data];\n        data.push.apply(data, currentData);\n\n        for (var d = 0; d < data.length; d++) {\n          var id = data[d].id;\n\n          if ($.inArray(id, val) === -1) {\n            val.push(id);\n          }\n        }\n\n        self.$element.val(val);\n        self.$element.trigger('input').trigger('change');\n      });\n    } else {\n      var val = data.id;\n\n      this.$element.val(val);\n      this.$element.trigger('input').trigger('change');\n    }\n  };\n\n  SelectAdapter.prototype.unselect = function (data) {\n    var self = this;\n\n    if (!this.$element.prop('multiple')) {\n      return;\n    }\n\n    data.selected = false;\n\n    if ($(data.element).is('option')) {\n      data.element.selected = false;\n\n      this.$element.trigger('input').trigger('change');\n\n      return;\n    }\n\n    this.current(function (currentData) {\n      var val = [];\n\n      for (var d = 0; d < currentData.length; d++) {\n        var id = currentData[d].id;\n\n        if (id !== data.id && $.inArray(id, val) === -1) {\n          val.push(id);\n        }\n      }\n\n      self.$element.val(val);\n\n      self.$element.trigger('input').trigger('change');\n    });\n  };\n\n  SelectAdapter.prototype.bind = function (container, $container) {\n    var self = this;\n\n    this.container = container;\n\n    container.on('select', function (params) {\n      self.select(params.data);\n    });\n\n    container.on('unselect', function (params) {\n      self.unselect(params.data);\n    });\n  };\n\n  SelectAdapter.prototype.destroy = function () {\n    // Remove anything added to child elements\n    this.$element.find('*').each(function () {\n      // Remove any custom data set by Select2\n      Utils.RemoveData(this);\n    });\n  };\n\n  SelectAdapter.prototype.query = function (params, callback) {\n    var data = [];\n    var self = this;\n\n    var $options = this.$element.children();\n\n    $options.each(function () {\n      var $option = $(this);\n\n      if (!$option.is('option') && !$option.is('optgroup')) {\n        return;\n      }\n\n      var option = self.item($option);\n\n      var matches = self.matches(params, option);\n\n      if (matches !== null) {\n        data.push(matches);\n      }\n    });\n\n    callback({\n      results: data\n    });\n  };\n\n  SelectAdapter.prototype.addOptions = function ($options) {\n    Utils.appendMany(this.$element, $options);\n  };\n\n  SelectAdapter.prototype.option = function (data) {\n    var option;\n\n    if (data.children) {\n      option = document.createElement('optgroup');\n      option.label = data.text;\n    } else {\n      option = document.createElement('option');\n\n      if (option.textContent !== undefined) {\n        option.textContent = data.text;\n      } else {\n        option.innerText = data.text;\n      }\n    }\n\n    if (data.id !== undefined) {\n      option.value = data.id;\n    }\n\n    if (data.disabled) {\n      option.disabled = true;\n    }\n\n    if (data.selected) {\n      option.selected = true;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    var $option = $(option);\n\n    var normalizedData = this._normalizeItem(data);\n    normalizedData.element = option;\n\n    // Override the option's data with the combined data\n    Utils.StoreData(option, 'data', normalizedData);\n\n    return $option;\n  };\n\n  SelectAdapter.prototype.item = function ($option) {\n    var data = {};\n\n    data = Utils.GetData($option[0], 'data');\n\n    if (data != null) {\n      return data;\n    }\n\n    if ($option.is('option')) {\n      data = {\n        id: $option.val(),\n        text: $option.text(),\n        disabled: $option.prop('disabled'),\n        selected: $option.prop('selected'),\n        title: $option.prop('title')\n      };\n    } else if ($option.is('optgroup')) {\n      data = {\n        text: $option.prop('label'),\n        children: [],\n        title: $option.prop('title')\n      };\n\n      var $children = $option.children('option');\n      var children = [];\n\n      for (var c = 0; c < $children.length; c++) {\n        var $child = $($children[c]);\n\n        var child = this.item($child);\n\n        children.push(child);\n      }\n\n      data.children = children;\n    }\n\n    data = this._normalizeItem(data);\n    data.element = $option[0];\n\n    Utils.StoreData($option[0], 'data', data);\n\n    return data;\n  };\n\n  SelectAdapter.prototype._normalizeItem = function (item) {\n    if (item !== Object(item)) {\n      item = {\n        id: item,\n        text: item\n      };\n    }\n\n    item = $.extend({}, {\n      text: ''\n    }, item);\n\n    var defaults = {\n      selected: false,\n      disabled: false\n    };\n\n    if (item.id != null) {\n      item.id = item.id.toString();\n    }\n\n    if (item.text != null) {\n      item.text = item.text.toString();\n    }\n\n    if (item._resultId == null && item.id && this.container != null) {\n      item._resultId = this.generateResultId(this.container, item);\n    }\n\n    return $.extend({}, defaults, item);\n  };\n\n  SelectAdapter.prototype.matches = function (params, data) {\n    var matcher = this.options.get('matcher');\n\n    return matcher(params, data);\n  };\n\n  return SelectAdapter;\n});\n"]},"metadata":{},"sourceType":"module"}