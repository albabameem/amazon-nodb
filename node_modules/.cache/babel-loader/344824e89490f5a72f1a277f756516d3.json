{"ast":null,"code":"define(['jquery'], function ($) {\n  function Tags(decorated, $element, options) {\n    var tags = options.get('tags');\n    var createTag = options.get('createTag');\n\n    if (createTag !== undefined) {\n      this.createTag = createTag;\n    }\n\n    var insertTag = options.get('insertTag');\n\n    if (insertTag !== undefined) {\n      this.insertTag = insertTag;\n    }\n\n    decorated.call(this, $element, options);\n\n    if ($.isArray(tags)) {\n      for (var t = 0; t < tags.length; t++) {\n        var tag = tags[t];\n\n        var item = this._normalizeItem(tag);\n\n        var $option = this.option(item);\n        this.$element.append($option);\n      }\n    }\n  }\n\n  Tags.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    this._removeOldTags();\n\n    if (params.term == null || params.page != null) {\n      decorated.call(this, params, callback);\n      return;\n    }\n\n    function wrapper(obj, child) {\n      var data = obj.results;\n\n      for (var i = 0; i < data.length; i++) {\n        var option = data[i];\n        var checkChildren = option.children != null && !wrapper({\n          results: option.children\n        }, true);\n        var optionText = (option.text || '').toUpperCase();\n        var paramsTerm = (params.term || '').toUpperCase();\n        var checkText = optionText === paramsTerm;\n\n        if (checkText || checkChildren) {\n          if (child) {\n            return false;\n          }\n\n          obj.data = data;\n          callback(obj);\n          return;\n        }\n      }\n\n      if (child) {\n        return true;\n      }\n\n      var tag = self.createTag(params);\n\n      if (tag != null) {\n        var $option = self.option(tag);\n        $option.attr('data-select2-tag', true);\n        self.addOptions([$option]);\n        self.insertTag(data, tag);\n      }\n\n      obj.results = data;\n      callback(obj);\n    }\n\n    decorated.call(this, params, wrapper);\n  };\n\n  Tags.prototype.createTag = function (decorated, params) {\n    var term = $.trim(params.term);\n\n    if (term === '') {\n      return null;\n    }\n\n    return {\n      id: term,\n      text: term\n    };\n  };\n\n  Tags.prototype.insertTag = function (_, data, tag) {\n    data.unshift(tag);\n  };\n\n  Tags.prototype._removeOldTags = function (_) {\n    var $options = this.$element.find('option[data-select2-tag]');\n    $options.each(function () {\n      if (this.selected) {\n        return;\n      }\n\n      $(this).remove();\n    });\n  };\n\n  return Tags;\n});","map":{"version":3,"sources":["/Users/albab/bookapro/amazon/src/assets/vendor/select2/src/js/select2/data/tags.js"],"names":["define","$","Tags","decorated","$element","options","tags","get","createTag","undefined","insertTag","call","isArray","t","length","tag","item","_normalizeItem","$option","option","append","prototype","query","params","callback","self","_removeOldTags","term","page","wrapper","obj","child","data","results","i","checkChildren","children","optionText","text","toUpperCase","paramsTerm","checkText","attr","addOptions","trim","id","_","unshift","$options","find","each","selected","remove"],"mappings":"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","sourcesContent":["define([\n  'jquery'\n], function ($) {\n  function Tags (decorated, $element, options) {\n    var tags = options.get('tags');\n\n    var createTag = options.get('createTag');\n\n    if (createTag !== undefined) {\n      this.createTag = createTag;\n    }\n\n    var insertTag = options.get('insertTag');\n\n    if (insertTag !== undefined) {\n        this.insertTag = insertTag;\n    }\n\n    decorated.call(this, $element, options);\n\n    if ($.isArray(tags)) {\n      for (var t = 0; t < tags.length; t++) {\n        var tag = tags[t];\n        var item = this._normalizeItem(tag);\n\n        var $option = this.option(item);\n\n        this.$element.append($option);\n      }\n    }\n  }\n\n  Tags.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    this._removeOldTags();\n\n    if (params.term == null || params.page != null) {\n      decorated.call(this, params, callback);\n      return;\n    }\n\n    function wrapper (obj, child) {\n      var data = obj.results;\n\n      for (var i = 0; i < data.length; i++) {\n        var option = data[i];\n\n        var checkChildren = (\n          option.children != null &&\n          !wrapper({\n            results: option.children\n          }, true)\n        );\n\n        var optionText = (option.text || '').toUpperCase();\n        var paramsTerm = (params.term || '').toUpperCase();\n\n        var checkText = optionText === paramsTerm;\n\n        if (checkText || checkChildren) {\n          if (child) {\n            return false;\n          }\n\n          obj.data = data;\n          callback(obj);\n\n          return;\n        }\n      }\n\n      if (child) {\n        return true;\n      }\n\n      var tag = self.createTag(params);\n\n      if (tag != null) {\n        var $option = self.option(tag);\n        $option.attr('data-select2-tag', true);\n\n        self.addOptions([$option]);\n\n        self.insertTag(data, tag);\n      }\n\n      obj.results = data;\n\n      callback(obj);\n    }\n\n    decorated.call(this, params, wrapper);\n  };\n\n  Tags.prototype.createTag = function (decorated, params) {\n    var term = $.trim(params.term);\n\n    if (term === '') {\n      return null;\n    }\n\n    return {\n      id: term,\n      text: term\n    };\n  };\n\n  Tags.prototype.insertTag = function (_, data, tag) {\n    data.unshift(tag);\n  };\n\n  Tags.prototype._removeOldTags = function (_) {\n    var $options = this.$element.find('option[data-select2-tag]');\n\n    $options.each(function () {\n      if (this.selected) {\n        return;\n      }\n\n      $(this).remove();\n    });\n  };\n\n  return Tags;\n});\n"]},"metadata":{},"sourceType":"module"}