{"ast":null,"code":"define(['jquery', '../keys', '../utils'], function ($, KEYS, Utils) {\n  function AllowClear() {}\n\n  AllowClear.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n    decorated.call(this, container, $container);\n\n    if (this.placeholder == null) {\n      if (this.options.get('debug') && window.console && console.error) {\n        console.error('Select2: The `allowClear` option should be used in combination ' + 'with the `placeholder` option.');\n      }\n    }\n\n    this.$selection.on('mousedown', '.select2-selection__clear', function (evt) {\n      self._handleClear(evt);\n    });\n    container.on('keypress', function (evt) {\n      self._handleKeyboardClear(evt, container);\n    });\n  };\n\n  AllowClear.prototype._handleClear = function (_, evt) {\n    // Ignore the event if it is disabled\n    if (this.isDisabled()) {\n      return;\n    }\n\n    var $clear = this.$selection.find('.select2-selection__clear'); // Ignore the event if nothing has been selected\n\n    if ($clear.length === 0) {\n      return;\n    }\n\n    evt.stopPropagation();\n    var data = Utils.GetData($clear[0], 'data');\n    var previousVal = this.$element.val();\n    this.$element.val(this.placeholder.id);\n    var unselectData = {\n      data: data\n    };\n    this.trigger('clear', unselectData);\n\n    if (unselectData.prevented) {\n      this.$element.val(previousVal);\n      return;\n    }\n\n    for (var d = 0; d < data.length; d++) {\n      unselectData = {\n        data: data[d]\n      }; // Trigger the `unselect` event, so people can prevent it from being\n      // cleared.\n\n      this.trigger('unselect', unselectData); // If the event was prevented, don't clear it out.\n\n      if (unselectData.prevented) {\n        this.$element.val(previousVal);\n        return;\n      }\n    }\n\n    this.$element.trigger('input').trigger('change');\n    this.trigger('toggle', {});\n  };\n\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\n    if (container.isOpen()) {\n      return;\n    }\n\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\n      this._handleClear(evt);\n    }\n  };\n\n  AllowClear.prototype.update = function (decorated, data) {\n    decorated.call(this, data);\n\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 || data.length === 0) {\n      return;\n    }\n\n    var removeAll = this.options.get('translations').get('removeAllItems');\n    var $remove = $('<span class=\"select2-selection__clear\" title=\"' + removeAll() + '\">' + '&times;' + '</span>');\n    Utils.StoreData($remove[0], 'data', data);\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\n  };\n\n  return AllowClear;\n});","map":{"version":3,"sources":["/Users/albab/bookapro/amazon/src/assets/vendor/select2/src/js/select2/selection/allowClear.js"],"names":["define","$","KEYS","Utils","AllowClear","prototype","bind","decorated","container","$container","self","call","placeholder","options","get","window","console","error","$selection","on","evt","_handleClear","_handleKeyboardClear","_","isDisabled","$clear","find","length","stopPropagation","data","GetData","previousVal","$element","val","id","unselectData","trigger","prevented","d","isOpen","which","DELETE","BACKSPACE","update","removeAll","$remove","StoreData","prepend"],"mappings":"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","sourcesContent":["define([\n  'jquery',\n  '../keys',\n  '../utils'\n], function ($, KEYS, Utils) {\n  function AllowClear () { }\n\n  AllowClear.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    if (this.placeholder == null) {\n      if (this.options.get('debug') && window.console && console.error) {\n        console.error(\n          'Select2: The `allowClear` option should be used in combination ' +\n          'with the `placeholder` option.'\n        );\n      }\n    }\n\n    this.$selection.on('mousedown', '.select2-selection__clear',\n      function (evt) {\n        self._handleClear(evt);\n    });\n\n    container.on('keypress', function (evt) {\n      self._handleKeyboardClear(evt, container);\n    });\n  };\n\n  AllowClear.prototype._handleClear = function (_, evt) {\n    // Ignore the event if it is disabled\n    if (this.isDisabled()) {\n      return;\n    }\n\n    var $clear = this.$selection.find('.select2-selection__clear');\n\n    // Ignore the event if nothing has been selected\n    if ($clear.length === 0) {\n      return;\n    }\n\n    evt.stopPropagation();\n\n    var data = Utils.GetData($clear[0], 'data');\n\n    var previousVal = this.$element.val();\n    this.$element.val(this.placeholder.id);\n\n    var unselectData = {\n      data: data\n    };\n    this.trigger('clear', unselectData);\n    if (unselectData.prevented) {\n      this.$element.val(previousVal);\n      return;\n    }\n\n    for (var d = 0; d < data.length; d++) {\n      unselectData = {\n        data: data[d]\n      };\n\n      // Trigger the `unselect` event, so people can prevent it from being\n      // cleared.\n      this.trigger('unselect', unselectData);\n\n      // If the event was prevented, don't clear it out.\n      if (unselectData.prevented) {\n        this.$element.val(previousVal);\n        return;\n      }\n    }\n\n    this.$element.trigger('input').trigger('change');\n\n    this.trigger('toggle', {});\n  };\n\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\n    if (container.isOpen()) {\n      return;\n    }\n\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\n      this._handleClear(evt);\n    }\n  };\n\n  AllowClear.prototype.update = function (decorated, data) {\n    decorated.call(this, data);\n\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\n        data.length === 0) {\n      return;\n    }\n\n    var removeAll = this.options.get('translations').get('removeAllItems');\n\n    var $remove = $(\n      '<span class=\"select2-selection__clear\" title=\"' + removeAll() +'\">' +\n        '&times;' +\n      '</span>'\n    );\n    Utils.StoreData($remove[0], 'data', data);\n\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\n  };\n\n  return AllowClear;\n});\n"]},"metadata":{},"sourceType":"module"}