{"ast":null,"code":"define(['jquery'], function ($) {\n  function InfiniteScroll(decorated, $element, options, dataAdapter) {\n    this.lastParams = {};\n    decorated.call(this, $element, options, dataAdapter);\n    this.$loadingMore = this.createLoadingMore();\n    this.loading = false;\n  }\n\n  InfiniteScroll.prototype.append = function (decorated, data) {\n    this.$loadingMore.remove();\n    this.loading = false;\n    decorated.call(this, data);\n\n    if (this.showLoadingMore(data)) {\n      this.$results.append(this.$loadingMore);\n      this.loadMoreIfNeeded();\n    }\n  };\n\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n    decorated.call(this, container, $container);\n    container.on('query', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n    container.on('query:append', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n    this.$results.on('scroll', this.loadMoreIfNeeded.bind(this));\n  };\n\n  InfiniteScroll.prototype.loadMoreIfNeeded = function () {\n    var isLoadMoreVisible = $.contains(document.documentElement, this.$loadingMore[0]);\n\n    if (this.loading || !isLoadMoreVisible) {\n      return;\n    }\n\n    var currentOffset = this.$results.offset().top + this.$results.outerHeight(false);\n    var loadingMoreOffset = this.$loadingMore.offset().top + this.$loadingMore.outerHeight(false);\n\n    if (currentOffset + 50 >= loadingMoreOffset) {\n      this.loadMore();\n    }\n  };\n\n  InfiniteScroll.prototype.loadMore = function () {\n    this.loading = true;\n    var params = $.extend({}, {\n      page: 1\n    }, this.lastParams);\n    params.page++;\n    this.trigger('query:append', params);\n  };\n\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\n    return data.pagination && data.pagination.more;\n  };\n\n  InfiniteScroll.prototype.createLoadingMore = function () {\n    var $option = $('<li ' + 'class=\"select2-results__option select2-results__option--load-more\"' + 'role=\"option\" aria-disabled=\"true\"></li>');\n    var message = this.options.get('translations').get('loadingMore');\n    $option.html(message(this.lastParams));\n    return $option;\n  };\n\n  return InfiniteScroll;\n});","map":{"version":3,"sources":["/Users/albab/bookapro/amazon/src/assets/vendor/select2/src/js/select2/dropdown/infiniteScroll.js"],"names":["define","$","InfiniteScroll","decorated","$element","options","dataAdapter","lastParams","call","$loadingMore","createLoadingMore","loading","prototype","append","data","remove","showLoadingMore","$results","loadMoreIfNeeded","bind","container","$container","self","on","params","isLoadMoreVisible","contains","document","documentElement","currentOffset","offset","top","outerHeight","loadingMoreOffset","loadMore","extend","page","trigger","_","pagination","more","$option","message","get","html"],"mappings":"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","sourcesContent":["define([\n  'jquery'\n], function ($) {\n  function InfiniteScroll (decorated, $element, options, dataAdapter) {\n    this.lastParams = {};\n\n    decorated.call(this, $element, options, dataAdapter);\n\n    this.$loadingMore = this.createLoadingMore();\n    this.loading = false;\n  }\n\n  InfiniteScroll.prototype.append = function (decorated, data) {\n    this.$loadingMore.remove();\n    this.loading = false;\n\n    decorated.call(this, data);\n\n    if (this.showLoadingMore(data)) {\n      this.$results.append(this.$loadingMore);\n      this.loadMoreIfNeeded();\n    }\n  };\n\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('query', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n\n    container.on('query:append', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n\n    this.$results.on('scroll', this.loadMoreIfNeeded.bind(this));\n  };\n\n  InfiniteScroll.prototype.loadMoreIfNeeded = function () {\n    var isLoadMoreVisible = $.contains(\n      document.documentElement,\n      this.$loadingMore[0]\n    );\n\n    if (this.loading || !isLoadMoreVisible) {\n      return;\n    }\n\n    var currentOffset = this.$results.offset().top +\n      this.$results.outerHeight(false);\n    var loadingMoreOffset = this.$loadingMore.offset().top +\n      this.$loadingMore.outerHeight(false);\n\n    if (currentOffset + 50 >= loadingMoreOffset) {\n      this.loadMore();\n    }\n  };\n\n  InfiniteScroll.prototype.loadMore = function () {\n    this.loading = true;\n\n    var params = $.extend({}, {page: 1}, this.lastParams);\n\n    params.page++;\n\n    this.trigger('query:append', params);\n  };\n\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\n    return data.pagination && data.pagination.more;\n  };\n\n  InfiniteScroll.prototype.createLoadingMore = function () {\n    var $option = $(\n      '<li ' +\n      'class=\"select2-results__option select2-results__option--load-more\"' +\n      'role=\"option\" aria-disabled=\"true\"></li>'\n    );\n\n    var message = this.options.get('translations').get('loadingMore');\n\n    $option.html(message(this.lastParams));\n\n    return $option;\n  };\n\n  return InfiniteScroll;\n});\n"]},"metadata":{},"sourceType":"module"}